name: üìÖ Alterar Hor√°rio de Atividade
description: Modificar os dias da semana ou hor√°rios de uma atividade existente
title: "[Hor√°rio]: "
labels: ["enhancement", "atividade", "hor√°rio", "copilot"]
assignees:
  - copilot
body:
  - type: markdown
    attributes:
      value: |
        ## üìÖ Formul√°rio de Altera√ß√£o de Hor√°rio
        
        Use este formul√°rio para solicitar mudan√ßas nos dias ou hor√°rios de uma atividade.
        
        **O Copilot ser√° automaticamente designado para implementar esta solicita√ß√£o.**

  - type: input
    id: activity-name
    attributes:
      label: Nome da Atividade *
      description: Nome exato da atividade
      placeholder: "Ex: Drama Club"
    validations:
      required: true

  - type: textarea
    id: current-schedule
    attributes:
      label: Hor√°rio Atual
      description: (Opcional) Descreva o hor√°rio atual se souber
      placeholder: "Ex: Quartas e sextas, 16:00-18:00"

  - type: checkboxes
    id: new-days
    attributes:
      label: Novos Dias da Semana *
      description: Selecione os novos dias em que a atividade ocorrer√°
      options:
        - label: Segunda-feira (Monday)
        - label: Ter√ßa-feira (Tuesday)
        - label: Quarta-feira (Wednesday)
        - label: Quinta-feira (Thursday)
        - label: Sexta-feira (Friday)
        - label: S√°bado (Saturday)
        - label: Domingo (Sunday)

  - type: input
    id: new-start-time
    attributes:
      label: Novo Hor√°rio de In√≠cio *
      description: Hor√°rio de in√≠cio no formato HH:MM (24h)
      placeholder: "15:30"
    validations:
      required: true

  - type: input
    id: new-end-time
    attributes:
      label: Novo Hor√°rio de T√©rmino *
      description: Hor√°rio de t√©rmino no formato HH:MM (24h)
      placeholder: "17:00"
    validations:
      required: true

  - type: dropdown
    id: reason
    attributes:
      label: Motivo da Altera√ß√£o *
      description: Por que o hor√°rio precisa ser alterado?
      options:
        - Conflito com outras atividades
        - Disponibilidade do espa√ßo/instala√ß√µes
        - Solicita√ß√£o dos estudantes
        - Disponibilidade do professor
        - Otimiza√ß√£o de transporte escolar
        - Melhor hor√°rio para a faixa et√°ria
        - Outro
    validations:
      required: true

  - type: textarea
    id: justification
    attributes:
      label: Justificativa *
      description: Explique em detalhes a necessidade desta altera√ß√£o
      placeholder: "Ex: O gin√°sio n√£o est√° mais dispon√≠vel √†s quartas-feiras devido a reformas. Precisamos mover para ter√ßas e quintas no mesmo hor√°rio."
    validations:
      required: true

  - type: textarea
    id: impact-analysis
    attributes:
      label: An√°lise de Impacto
      description: Como isso afetar√° os estudantes j√° inscritos?
      placeholder: "Ex: J√° verifiquei com os estudantes inscritos e todos podem comparecer no novo hor√°rio."

  - type: checkboxes
    id: confirmations
    attributes:
      label: Confirma√ß√µes *
      description: Confirme os seguintes pontos
      options:
        - label: O espa√ßo/instala√ß√£o est√° dispon√≠vel nos novos dias e hor√°rios
          required: true
        - label: Notificarei todos os estudantes inscritos sobre a mudan√ßa
          required: true
        - label: (Se aplic√°vel) Confirmo disponibilidade de supervis√£o/instrutores
          required: true

  - type: textarea
    id: additional-context
    attributes:
      label: Informa√ß√µes Adicionais
      description: Qualquer outra informa√ß√£o relevante

  - type: markdown
    attributes:
      value: |
        ---
        
        ## ü§ñ Crit√©rios de Aceita√ß√£o para o Copilot
        
        A implementa√ß√£o deve:
        1. Localizar a atividade existente pelo nome exato
        2. Atualizar o objeto `ScheduleDetails` com os novos dias e hor√°rios
        3. Atualizar tamb√©m o campo `schedule` (string leg√≠vel) com a nova descri√ß√£o
        4. Validar que os hor√°rios est√£o no formato correto (LocalTime)
        5. Validar que o hor√°rio de t√©rmino √© posterior ao de in√≠cio
        6. Criar uma migra√ß√£o Mongock para aplicar as altera√ß√µes
        7. Verificar que o novo hor√°rio aparece corretamente na interface web
        8. Garantir que os filtros por dia e hor√°rio continuam funcionando
        
        ## üí° Dicas de Implementa√ß√£o
        
        - Criar nova migra√ß√£o: `V00X_UpdateActivitySchedule_[NomeAtividade].java`
        - Localizar atividade: `mongoTemplate.findOne(Query.query(Criteria.where("name").is(activityName)), Activity.class)`
        - Criar nova ScheduleDetails:
          ```java
          List<String> days = List.of("Monday", "Wednesday"); // dias em ingl√™s
          LocalTime startTime = LocalTime.of(15, 30);
          LocalTime endTime = LocalTime.of(17, 0);
          ScheduleDetails newSchedule = new ScheduleDetails(days, startTime, endTime);
          activity.setScheduleDetails(newSchedule);
          ```
        - Atualizar descri√ß√£o leg√≠vel:
          ```java
          activity.setSchedule("Segundas e quartas, 15:30 - 17:00");
          ```
        - Persistir: `mongoTemplate.save(activity)`
        
        ## üîç Contexto T√©cnico
        
        - **Campos**: 
          - `Activity.scheduleDetails` (tipo: ScheduleDetails)
          - `Activity.schedule` (tipo: String - descri√ß√£o leg√≠vel)
        - **Value Object**: `com.mergingtonhigh.schoolmanagement.domain.valueobjects.ScheduleDetails`
        - **Formato de dias**: Usar nomes em ingl√™s (Monday, Tuesday, Wednesday, Thursday, Friday, Saturday, Sunday)
        - **Formato de hor√°rio**: LocalTime do Java
        
        ## üìã Formato do ScheduleDetails
        
        ```java
        public class ScheduleDetails {
            private List<String> days;      // ["Monday", "Wednesday"]
            private LocalTime startTime;     // LocalTime.of(15, 30)
            private LocalTime endTime;       // LocalTime.of(17, 0)
        }
        ```
        
        ## ‚ö†Ô∏è Valida√ß√µes Importantes
        
        - Dias devem estar em ingl√™s e com primeira letra mai√∫scula
        - Hor√°rio de t√©rmino deve ser depois do hor√°rio de in√≠cio
        - Formato de hor√°rio: HH:MM em 24 horas
        - Lista de dias n√£o pode estar vazia
        
        ## üéØ Impacto nos Filtros
        
        A interface web permite filtrar atividades por:
        - Dia da semana (deve funcionar com os novos dias)
        - Per√≠odo (manh√£, tarde, noite) - baseado no hor√°rio de in√≠cio
        - Os filtros usam o campo `scheduleDetails` para filtrar
