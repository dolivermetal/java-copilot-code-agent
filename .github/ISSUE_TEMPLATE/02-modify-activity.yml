name: ‚úèÔ∏è Modificar Atividade Existente
description: Solicitar altera√ß√µes em uma atividade extracurricular existente
title: "[Modificar Atividade]: "
labels: ["enhancement", "atividade", "copilot"]
assignees:
  - copilot
body:
  - type: markdown
    attributes:
      value: |
        ## üìù Formul√°rio de Modifica√ß√£o de Atividade
        
        Use este formul√°rio para solicitar altera√ß√µes em uma atividade existente.
        Preencha apenas os campos que deseja modificar.
        
        **O Copilot ser√° automaticamente designado para implementar esta solicita√ß√£o.**

  - type: input
    id: activity-name
    attributes:
      label: Nome da Atividade Existente *
      description: Nome exato da atividade que deseja modificar
      placeholder: "Ex: Chess Club"
    validations:
      required: true

  - type: checkboxes
    id: fields-to-modify
    attributes:
      label: Campos a Modificar *
      description: Selecione quais campos deseja alterar
      options:
        - label: Nome da atividade
        - label: Descri√ß√£o
        - label: Tipo/Categoria
        - label: Dias da semana
        - label: Hor√°rio de in√≠cio
        - label: Hor√°rio de t√©rmino
        - label: Capacidade m√°xima

  - type: input
    id: new-name
    attributes:
      label: Novo Nome
      description: (Opcional) Novo nome para a atividade
      placeholder: "Ex: Advanced Chess Club"

  - type: textarea
    id: new-description
    attributes:
      label: Nova Descri√ß√£o
      description: (Opcional) Nova descri√ß√£o para a atividade
      placeholder: "Ex: Aprenda estrat√©gias avan√ßadas de xadrez..."

  - type: dropdown
    id: new-type
    attributes:
      label: Novo Tipo/Categoria
      description: (Opcional) Nova categoria para a atividade
      options:
        - N√£o alterar
        - Esportes (SPORTS)
        - Artes (ARTS)
        - Acad√™mico (ACADEMIC)
        - M√∫sica (MUSIC)
        - Ci√™ncias (SCIENCE)
        - Tecnologia (TECHNOLOGY)
        - Clubes (CLUBS)

  - type: checkboxes
    id: new-days
    attributes:
      label: Novos Dias da Semana
      description: (Opcional) Selecione os novos dias. Deixe em branco para n√£o alterar.
      options:
        - label: Segunda-feira (Monday)
        - label: Ter√ßa-feira (Tuesday)
        - label: Quarta-feira (Wednesday)
        - label: Quinta-feira (Thursday)
        - label: Sexta-feira (Friday)
        - label: S√°bado (Saturday)
        - label: Domingo (Sunday)

  - type: input
    id: new-start-time
    attributes:
      label: Novo Hor√°rio de In√≠cio
      description: (Opcional) Novo hor√°rio de in√≠cio no formato HH:MM
      placeholder: "15:30"

  - type: input
    id: new-end-time
    attributes:
      label: Novo Hor√°rio de T√©rmino
      description: (Opcional) Novo hor√°rio de t√©rmino no formato HH:MM
      placeholder: "17:00"

  - type: input
    id: new-max-participants
    attributes:
      label: Nova Capacidade M√°xima
      description: (Opcional) Novo n√∫mero m√°ximo de participantes
      placeholder: "25"

  - type: textarea
    id: justification
    attributes:
      label: Justificativa *
      description: Explique por que estas altera√ß√µes s√£o necess√°rias
      placeholder: "Ex: A atividade est√° muito popular e precisamos aumentar a capacidade..."
    validations:
      required: true

  - type: textarea
    id: additional-context
    attributes:
      label: Informa√ß√µes Adicionais
      description: Qualquer informa√ß√£o adicional relevante

  - type: markdown
    attributes:
      value: |
        ---
        
        ## ü§ñ Crit√©rios de Aceita√ß√£o para o Copilot
        
        A implementa√ß√£o deve:
        1. Localizar a atividade existente pelo nome exato fornecido
        2. Modificar apenas os campos especificados, mantendo os demais inalterados
        3. Validar que os novos valores s√£o v√°lidos (hor√°rios, capacidade, etc.)
        4. Atualizar o banco de dados atrav√©s de uma migra√ß√£o Mongock
        5. Verificar que as altera√ß√µes aparecem corretamente na interface web
        6. Se o nome for alterado, garantir que refer√™ncias sejam atualizadas
        7. Se a capacidade for reduzida, verificar que n√£o h√° mais participantes do que o novo limite
        
        ## üí° Dicas de Implementa√ß√£o
        
        - Criar uma nova migra√ß√£o em `src/main/java/.../infrastructure/migrations/`
        - Usar `mongoTemplate.findOne()` para localizar a atividade existente
        - Aplicar as altera√ß√µes nos campos especificados
        - Usar `mongoTemplate.save()` para persistir as altera√ß√µes
        - Validar os novos valores usando os m√©todos de valida√ß√£o da entidade Activity
        - Se modificar o nome, considerar impacto em inscri√ß√µes existentes
        - Manter a lista de participantes existentes
        
        ## üîç Contexto T√©cnico
        
        - **Entidade**: `com.mergingtonhigh.schoolmanagement.domain.entities.Activity`
        - **Repository**: `com.mergingtonhigh.schoolmanagement.domain.repositories.ActivityRepository`
        - **Migra√ß√µes**: Seguir padr√£o de `V001_InitialDatabaseSetup.java`
        - **Valida√ß√µes**: Usar m√©todos validate* da classe Activity
        
        ## ‚ö†Ô∏è Limita√ß√µes
        
        - N√£o √© poss√≠vel reduzir a capacidade abaixo do n√∫mero atual de participantes
        - Altera√ß√µes de hor√°rio podem impactar estudantes j√° inscritos
        - Modifica√ß√µes no nome requerem aten√ß√£o especial para manter integridade
